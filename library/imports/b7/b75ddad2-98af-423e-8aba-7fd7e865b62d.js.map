{"version":3,"sources":["assets\\Script\\hero-player.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property\r\n    text: string = \"基础脚本\";\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    private _input = {};\r\n    private _speed: number = 15;\r\n    private _animation: string = 'player_idle';\r\n    private _position: cc.Vec2;\r\n    private _ani = 'player_idle';\r\n    private _lv: cc.Vec2;\r\n    onLoad() {\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        this.node.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED,\r\n            this.animationFinished, this);\r\n\r\n        this._position = this.node.getPosition();\r\n\r\n        let rigid = this.node.getComponent(cc.RigidBody);\r\n        this._lv = rigid.linearVelocity;\r\n\r\n    }\r\n\r\n    onBeginContact(contact: cc.PhysicsContact, selfCollider: cc.PhysicsCollider, otherCollider: cc.PhysicsCollider) {\r\n        console.log(\"touch....\")\r\n    }\r\n\r\n    onEndContact(contact: cc.PhysicsContact, selfCollider: cc.PhysicsCollider, otherCollider: cc.PhysicsCollider) {\r\n        console.log(\"end.........\")\r\n    }\r\n\r\n    onDestroy() {\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        this.node.getComponent(cc.Animation).off(cc.Animation.EventType.FINISHED, this.animationFinished, this);\r\n    }\r\n\r\n    animationFinished(event: string, data: any) {\r\n        console.log(event, data);\r\n    }\r\n\r\n    onKeyDown(e: any) {\r\n        this._input[e.keyCode] = 1;\r\n        if (this._input[cc.macro.KEY.a]) {\r\n            this._ani = 'player_a';\r\n            //this._position.x -= this._speed;\r\n            this._lv.y = 0;\r\n            this._lv.x = -this._speed;\r\n        } else if (this._input[cc.macro.KEY.d]) {\r\n            this._ani = 'player_d';\r\n            //this._position.x += this._speed;\r\n            this._lv.y = 0;\r\n            this._lv.x = this._speed;\r\n        } else if (this._input[cc.macro.KEY.s]) {\r\n            this._ani = 'player_s';\r\n            //this._position.y -= this._speed;\r\n            this._lv.x = 0;\r\n            this._lv.y = -this._speed;\r\n        } else if (this._input[cc.macro.KEY.w]) {\r\n            this._ani = 'player_w';\r\n            //this._position.y += this._speed;\r\n            this._lv.x = 0;\r\n            this._lv.y = this._speed;\r\n        } else {\r\n            this._lv.x = 0;\r\n            this._lv.y = 0;\r\n        }\r\n        console.log(\"key press:\" + e.keyCode + \"speed:\" + this._lv);\r\n        this.node.getComponent(cc.RigidBody).linearVelocity = this._lv;\r\n    }\r\n\r\n    playAnimation(ani: string) {\r\n        if (this._animation !== ani) {\r\n            this._animation = ani;\r\n            this.node.getComponent(cc.Animation).play(ani);\r\n        }\r\n    }\r\n\r\n    onKeyUp(e: any) {\r\n        this._input[e.keyCode] = 0;\r\n        if (e.keyCode == cc.macro.KEY.a || e.keyCode == cc.macro.KEY.d) {\r\n            this._lv.x = 0;\r\n        }\r\n        else if (e.keyCode == cc.macro.KEY.s || e.keyCode == cc.macro.KEY.w) {\r\n            this._lv.y = 0;\r\n        }\r\n        console.log(\"key up:\" + e.keyCode + \"speed:\" + this._lv);\r\n        this.node.getComponent(cc.RigidBody).linearVelocity = this._lv;\r\n    }\r\n\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    update(dt: number) {\r\n        this.playAnimation(this._ani);\r\n    }\r\n}\r\n"]}